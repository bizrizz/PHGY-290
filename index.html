<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Interview</title>
  <style>
    /* Fill the entire viewport and center items */
    html, body {
      margin: 0;
      padding: 0;
      height: 100%;
      font-family: "Segoe UI", Tahoma, sans-serif;
      background: linear-gradient(to bottom right, #e8ebf0, #ffffff);
      color: #333;
      text-align: center;
    }

    /* A main wrapper that centers everything vertically */
    .container {
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      height: 100%;
      box-sizing: border-box;
      max-width: 800px;
      margin: 0 auto;
      padding: 20px;
    }

    h1, h2, p {
      margin: 10px auto;
      padding: 0;
    }

    /* Mode Buttons */
    button {
      background-color: #6fa8dc;
      color: white;
      font-size: 16px;
      border-radius: 5px;
      padding: 10px 20px;
      border: none;
      cursor: pointer;
      margin: 5px;
    }
    button:hover {
      background-color: #86c0f5;
    }

    .hidden {
      display: none;
    }

    /* Make each screen fill vertical space nicely */
    .screen {
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      width: 100%;
      height: 100%;
    }

    /* Big, full-page question text */
    #questionText {
      font-size: 2.2em;  /* adjust as you see fit */
      font-weight: 600;
      margin: 0 0 30px;
      max-width: 90%;
      line-height: 1.3em;
    }

    /* Progress bar styling */
    .progressBar {
      width: 80%;
      max-width: 500px;
      height: 20px;
      background-color: #fff;
      border-radius: 5px;
      margin: 20px 0 10px;
      position: relative;
      border: 1px solid #ccc;
    }
    .progressFill {
      height: 100%;
      background-color: #6aa84f;
      width: 0%;
      border-radius: 5px;
      transition: width 0.2s;
    }

    /* Wave container (fake recording animation) */
    .wave-container {
      display: flex;
      justify-content: center;
      align-items: flex-end;
      height: 50px;
      margin: 15px 0;
      width: 80%;    /* so it’s not too wide */
      max-width: 500px;
    }
    .wave-bar {
      width: 6px;
      background-color: #6fa8dc;
      margin: 0 3px;
      border-radius: 3px;
      height: 20%;
      transition: height 0.2s ease-in-out;
    }

    #statusMessage {
      margin-top: 10px;
      font-size: 14px;
      color: #555;
      min-height: 24px;
    }
  </style>
</head>

<body>
<div class="container">

  <!-- Welcome Screen -->
  <div id="welcomeScreen" class="screen">
    <h2>Choose Your Interview Mode</h2>
    <div>
      <button id="rapidBtn">Rapid Fire</button>
      <button id="slowerBtn">Open-Ended</button>
    </div>
  </div>

  <!-- Rapid Intro Screen -->
  <div id="rapidIntro" class="screen hidden">
    <h2>Rapid Mode</h2>
    <p>Press the button to begin.</p>
    <button id="startRapidInterviewBtn">Start</button>
  </div>

  <!-- Question Screen (Used by both modes) -->
  <div id="questionScreen" class="screen hidden">
    <div id="questionText"></div>

    <div class="wave-container hidden" id="waveContainer">
      <div class="wave-bar"></div>
      <div class="wave-bar"></div>
      <div class="wave-bar"></div>
      <div class="wave-bar"></div>
      <div class="wave-bar"></div>
    </div>

    <div class="progressBar">
      <div class="progressFill" id="progressFill"></div>
    </div>

    <p id="statusMessage"></p>
    <!-- Start/Stop Button for Slower Mode -->
    <button id="startStopBtn" class="hidden">Start Recording</button>
  </div>

  <!-- Thank You Screen -->
  <div id="thanksScreen" class="screen hidden">
    <h2>Thank you!</h2>
  </div>
</div>

<script>
/* -------------------- QUESTIONS & RANDOMIZATION -------------------- */
const fullQuestionBank = [
  "What’s a small habit that’s had a big impact on your life?",
  "If you had to sum up your personality in three words, what would they be?",
  "What’s something you do differently than most people?",
  "What’s one thing that instantly puts you in a good mood?",
  "If you could relive any 10 seconds of your life, what moment would you pick?",
  "What’s one challenge that changed the way you think?",
  "What’s the best advice you’ve ever received?",
  "If you could tell your past self one thing, what would it be?",
  "What’s something you learned the hard way?",
  "What’s one decision you made that completely changed your path?",
  "What’s the fastest decision you’ve ever had to make?",
  "How do you approach a problem when you don’t know where to start?",
  "What’s one time you had to think on your feet?",
  "How do you decide when to stick with something versus move on?",
  "If you had 30 seconds to convince someone of an idea, how would you do it?",
  "What’s one trait that makes someone great to work with?",
  "How do you handle a disagreement when you know you’re right?",
  "What’s the most important lesson you’ve learned from working with others?",
  "What’s a belief you once held strongly but have since changed your mind about?",
  "What’s a time when you had to step up unexpectedly?",
  "What’s an idea you think more people should be talking about?",
  "What’s one thing that needs to be completely rethought?",
  "If you had unlimited resources for one day, what would you do?",
  "What’s a simple change that could make a big difference?",
  "If you could improve one thing in the world instantly, what would it be?",
  "What’s one thing you wish you had started doing earlier?",
  "What’s a lesson from failure that stuck with you?",
  "How do you measure success beyond achievements?",
  "If you had to give yourself one rule for the future, what would it be?",
  "What’s one way you stay motivated when things get tough?",
  "What’s something you’ve stopped caring about as you’ve gotten older?",
  "What’s a book, movie, or piece of art that profoundly changed your perspective?",
  "What’s something you’ve accomplished that you once thought was impossible?",
  "If you could spend a day with anyone, living or dead, who would it be and what would you do?"
];

// Shuffle function
function shuffleArray(arr) {
  for (let i = arr.length - 1; i > 0; i--) {
    const j = Math.floor(Math.random() * (i + 1));
    [arr[i], arr[j]] = [arr[j], arr[i]];
  }
  return arr;
}

// Shuffle, then pick subsets
shuffleArray(fullQuestionBank);
const RAPID_QUESTIONS = fullQuestionBank.slice(0, 12);
const SLOWER_QUESTIONS = fullQuestionBank.slice(12, 17);

/* -------------------- DOM ELEMENTS -------------------- */
const welcomeScreen = document.getElementById("welcomeScreen");
const rapidIntro = document.getElementById("rapidIntro");
const questionScreen = document.getElementById("questionScreen");
const thanksScreen = document.getElementById("thanksScreen");

const rapidBtn = document.getElementById("rapidBtn");
const slowerBtn = document.getElementById("slowerBtn");
const startRapidInterviewBtn = document.getElementById("startRapidInterviewBtn");

const questionTextEl = document.getElementById("questionText");
const waveContainer = document.getElementById("waveContainer");
const progressFill = document.getElementById("progressFill");
const statusMessage = document.getElementById("statusMessage");
const startStopBtn = document.getElementById("startStopBtn");

/* -------------------- STATE -------------------- */
let mode = null; // 'rapid' or 'slower'
let questionIndex = 0;
let questionList = [];
let isRecording = false;
let waveInterval = null;

/* -------------------- EVENT LISTENERS -------------------- */
rapidBtn.onclick = () => initMode("rapid");
slowerBtn.onclick = () => initMode("slower");
startRapidInterviewBtn.onclick = startRapidMode;
startStopBtn.onclick = toggleSlowerRecording;

/* -------------------- MODE SETUP -------------------- */
function initMode(selectedMode) {
  mode = selectedMode;
  questionIndex = 0;
  isRecording = false;

  // Hide all sections
  welcomeScreen.classList.add("hidden");
  rapidIntro.classList.add("hidden");
  questionScreen.classList.add("hidden");
  thanksScreen.classList.add("hidden");

  if (mode === "rapid") {
    questionList = RAPID_QUESTIONS;
    // Show rapid intro
    rapidIntro.classList.remove("hidden");
  } else {
    questionList = SLOWER_QUESTIONS;
    // Immediately load the first question
    if (questionList.length > 0) {
      setupSlowerQuestion(0);
    }
  }
}

/* -------------------- WAVE ANIMATION -------------------- */
function startWaveAnimation() {
  waveContainer.classList.remove("hidden");
  waveInterval = setInterval(() => {
    const bars = document.querySelectorAll(".wave-bar");
    bars.forEach(bar => {
      // random height between 20% and 100%
      let h = Math.floor(Math.random() * 80) + 20;
      bar.style.height = h + "%";
    });
  }, 200);
}

function stopWaveAnimation() {
  if (waveInterval) {
    clearInterval(waveInterval);
    waveInterval = null;
  }
  waveContainer.classList.add("hidden");
  // Reset bars
  const bars = document.querySelectorAll(".wave-bar");
  bars.forEach(bar => bar.style.height = "20%");
}

/* -------------------- RAPID MODE -------------------- */
function startRapidMode() {
  rapidIntro.classList.add("hidden");
  questionScreen.classList.remove("hidden");

  questionIndex = 0;
  showRapidQuestion(questionIndex);
}

function showRapidQuestion(idx) {
  if (idx >= questionList.length) {
    // Done
    showThanks();
    return;
  }
  const question = questionList[idx];
  questionTextEl.textContent = question;

  progressFill.style.width = "0%";
  statusMessage.textContent = "Recording...";
  isRecording = true;

  // Hide slower mode button
  startStopBtn.classList.add("hidden");

  startWaveAnimation();

  let totalTime = 10; // seconds for each question
  let elapsed = 0;
  let timerId = setInterval(() => {
    elapsed++;
    const pct = (elapsed / totalTime) * 100;
    progressFill.style.width = pct + "%";

    if (elapsed >= totalTime) {
      clearInterval(timerId);
      isRecording = false;
      stopWaveAnimation();
      statusMessage.textContent = "Next question...";
      setTimeout(() => {
        questionIndex++;
        showRapidQuestion(questionIndex);
      }, 1500);
    }
  }, 1000);
}

/* -------------------- SLOWER MODE -------------------- */
function setupSlowerQuestion(idx) {
  questionScreen.classList.remove("hidden");
  questionTextEl.textContent = questionList[idx];
  progressFill.style.width = "0%";
  statusMessage.textContent = "Press 'Start Recording'.";
  startStopBtn.classList.remove("hidden");
  startStopBtn.disabled = false;
  startStopBtn.textContent = "Start Recording";
  stopWaveAnimation(); // ensure wave is off
}

function toggleSlowerRecording() {
  if (!isRecording) {
    // start
    isRecording = true;
    startStopBtn.textContent = "Stop Recording";
    statusMessage.textContent = "Recording...";
    startWaveAnimation();
  } else {
    // stop
    isRecording = false;
    stopWaveAnimation();
    startStopBtn.disabled = true;
    startStopBtn.textContent = "Recording Stopped";
    statusMessage.textContent = "Wait 30 seconds...";

    // 30-second cooldown
    let totalTime = 30;
    let elapsed = 0;
    let cdTimer = setInterval(() => {
      elapsed++;
      let pct = (elapsed / totalTime) * 100;
      progressFill.style.width = pct + "%";
      if (elapsed >= totalTime) {
        clearInterval(cdTimer);
        questionIndex++;
        if (questionIndex < questionList.length) {
          setupSlowerQuestion(questionIndex);
        } else {
          showThanks();
        }
      }
    }, 1000);
  }
}

/* -------------------- THANK YOU -------------------- */
function showThanks() {
  questionScreen.classList.add("hidden");
  thanksScreen.classList.remove("hidden");
}
</script>
</body>
</html>
